"use strict";angular.module("myApp",["ngRoute","ngSanitize","ngTouch","ui.select","ui.bootstrap","angular-kaarousel","pascalprecht.translate","LocalStorageModule","toastr","myApp.home","myApp.staticPages","myApp.flight","daterangepicker","vcRecaptcha","ng.deviceDetector","metatags"]).config(["$routeProvider","localStorageServiceProvider","$httpProvider","MetaTagsProvider",function($routeProvider,localStorageServiceProvider,$httpProvider,MetaTagsProvider){$routeProvider.otherwise({redirectTo:"/not-found"}),MetaTagsProvider.otherwise({description:"Nile Air",keywords:"Egypt, Air, Nile, flights, jeddah, مصر للطيران, النيل للطيران"}),localStorageServiceProvider.setPrefix("nileair"),localStorageServiceProvider.setStorageType("localStorage")}]).run(["$rootScope","$http","$translate","$timeout","toastr","$window","$route","$sce","$uibModal","$interval","$location","$filter","localStorageService","deviceDetector","MetaTags",function($rootScope,$http,$translate,$timeout,toastr,$window,$route,$sce,$uibModal,$interval,$location,$filter,localStorageService,deviceDetector,MetaTags){function containsObject(obj,list){var i;for(i=0;i<list.length;i++)if(list[i].id==obj.id)return!0;return!1}MetaTags.initialize(),$window.ga("create","UA-66156754-1","auto"),$rootScope.amaduesUrl="https://book.nileair.com/plnext/NileAir/Override.action?",$rootScope.amaduesUrlBokking="https://book.nileair.com/plnext/NileAir/Override.action?",$rootScope.amaduesUrlCheckin="https://checkin.si.amadeus.net/static/PRD/NP/#/checkin?",$rootScope.amaduesMobileUrlBokking="https://book.nileair.com/plnext/NileAir/Override.action?",$rootScope.amaduesMobileUrlCheckin="https://checkin.si.amadeus.net/static/PRD/NP/#/checkin?",$rootScope.isMobile=!1,"android"!=deviceDetector.device&&"ipad"!=deviceDetector.device&&"iphone"!=deviceDetector.device&&"ipod"!=deviceDetector.device&&"blackberry"!=deviceDetector.device||($rootScope.amaduesUrl="https://book.nileair.com/plnext/NileAir/Override.action?",$rootScope.isMobile=!1),$(document).ready(function(){$("#flight-search a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(".stillmenu").click(function(e){e.stopPropagation()}),$(".countries-select").msDropdown(),$("#bugabuga_mobile").msDropdown();var stillmenus=$(".stillmenu .collapsed");$(".stillmenu .collapsed").click(function(e){var $this=this;stillmenus.each(function(i){var $target=$($(this).not($this).attr("href"));$target.removeClass("in").attr("style","")});var $target=$($(this).attr("href"));$target.toggleClass("in").attr("style",""),e.preventDefault()}),$("#datepicker").datepicker({numberOfMonths:3,showButtonPanel:!0})});var isIE=function(userAgent){return userAgent=userAgent||navigator.userAgent,userAgent.indexOf("MSIE ")>-1||userAgent.indexOf("Trident/")>-1||userAgent.indexOf("Edge/")>-1};$rootScope.slidesHeightChanged=0,$rootScope.$watch("slidesHeightChanged",function(){if(isIE()){console.log("a7eeh");var style=$(".slides").attr("style");style&&style.indexOf("height")>=0&&parseInt($(".slides").prop("style").height.replace("px",""))>=0?$(".slides").removeAttr("style"):setTimeout(function(){$rootScope.slidesHeightChanged^=1},300)}}),$rootScope.getNumber=function(num){return new Array(Math.ceil(num))},$rootScope.toggleClass=function($event,item){if(item.show=!item.show,$event.stopPropagation(),$rootScope.headerMenu)for(var i=0;i<$rootScope.headerMenu.length;i++)if($rootScope.headerMenu[i].subMenus)for(var j=0;j<$rootScope.headerMenu[i].subMenus.length;j++){var curItem=$rootScope.headerMenu[i].subMenus[j];curItem!=item&&(curItem.show=!1)}},$http({method:"GET",url:window.data+"/homeData"}).then(function(data){console.log(data.data.headerMenu),$rootScope.headerMenu=data.data.headerMenu,$rootScope.footerMenu=data.data.footerMenu,$rootScope.banners=data.data.banners,$timeout(function(){$(".blueberry").blueberry({duration:3e3,interval:8e3,pager:!1,hoverpause:!0,keynav:!1,buttons:!0})},4e3)},function(error){console.log(error)}),$http({method:"GET",url:window.data+"/officesData"}).then(function(data){$rootScope.allOffices=data.data},function(error){console.log(error)}),$rootScope.configuration={flight_booking:1},$http({method:"GET",url:window.data+"/general-configurations"}).then(function(data){data.data.length>=1&&($rootScope.configuration=data.data[0])},function(error){console.log(error)}),$rootScope.$on("$routeChangeStart",function(event,next,current){var lang=$rootScope.language,url=$location.$$path;if(""==url)url="/home";else if(url.indexOf("not-found")>=0){var curUrl=window.location.href;return curUrl=curUrl.replace(/\/#.*/,"/404.html"),void(window.location.href=curUrl)}var curLanguage=localStorageService.get("language");if(lang="en"===curLanguage||"ar"===curLanguage?curLanguage:$rootScope.language,url.indexOf("/ar/")>=0?$rootScope.selectLanguage("ar"):url.indexOf("/en/")>=0?$rootScope.selectLanguage("en"):$location.path("/"+lang+url),$rootScope.headerMenu)for(var i=0;i<$rootScope.headerMenu.length;i++)if($rootScope.headerMenu[i].subMenus)for(var j=0;j<$rootScope.headerMenu[i].subMenus.length;j++){var item=$rootScope.headerMenu[i].subMenus[j];item.show=!1}$("#collapse").removeClass("in"),$("#collapse").removeClass("open"),$window.ga("send","pageview",$location.path())}),$rootScope.$watch("language",function(newValue,oldValue){var url=$location.$$path;newValue!==oldValue&&(localStorageService.set("language",newValue),$location.path(url.replace("/"+oldValue+"/","/"+newValue+"/")))}),$rootScope.subscribe=function(){if($rootScope.email&&$rootScope.full_name)return localStorageService.get("subscribed")?void toastr.error("Sorry This email is already subscribed"):void $http.post(window.data+"/contacts",{id:null,name:$rootScope.full_name,email:$rootScope.email,pref_language:$rootScope.language}).then(function(data){console.log(data.data),$rootScope.email="",$rootScope.full_name="",toastr.success("Subscription Done","Your email saved successfully!"),localStorageService.set("subscribed",!0)},function(error){400===error.status&&(toastr.error("Sorry This email is already subscribed"),localStorageService.set("subscribed",!0))})},$rootScope.groupFn=function(item){var myjson=JSON.parse(item.country);return"en"===$rootScope.language?myjson.en:myjson.ar},$rootScope.activeTab=0,$rootScope.curTabIndex="",$rootScope.activateTabs=function(tabIndex){var currentCtrl=$route.current.$$route.controller;"HomeCtrl"===currentCtrl?$rootScope.activeTab=1:$rootScope.curTabIndex===tabIndex?$rootScope.activeTab^=1:($rootScope.curTabIndex=tabIndex,$rootScope.activeTab=1)};var departingDate=new Date,returningDate=new Date;departingDate.setDate(departingDate.getDate()+1),returningDate.setDate(returningDate.getDate()+4);var formattedDepartingDate=$filter("date")(departingDate,"yyyy-MM-dd"),formattedReturningDate=$filter("date")(returningDate,"yyyy-MM-dd");console.log(formattedReturningDate),$rootScope.today=new Date,$rootScope.amadeus={adults:"1",children:"0",infants:"0",departing_date:formattedDepartingDate,returning_date:formattedReturningDate,office_id:"",infantsSelection:["0","1"],childrenSellection:["0","1","2","3","4","5","6","7","8"],mobile:$rootScope.isMobile},$rootScope.multiAmadeus={adults:"1",children:"0",infants:"0",departing_date:formattedDepartingDate,returning_date:formattedReturningDate,office_id:"",infantsSelection:["0","1"],childrenSellection:["0","1","2","3","4","5","6","7","8"],mobile:$rootScope.isMobile},$rootScope.oneWayAmadeus={adults:"1",children:"0",infants:"0",departing_date:formattedDepartingDate,returning_date:formattedReturningDate,office_id:"",infantsSelection:["0","1"],childrenSellection:["0","1","2","3","4","5","6","7","8"],mobile:$rootScope.isMobile},$rootScope.flightStatus={mobile:$rootScope.isMobile},$rootScope.booking={lastName:"",refNumber:"",mobile:$rootScope.isMobile,language:$rootScope.language},$rootScope.checkin={lastName:"",date:"",refNumber:"",mobile:$rootScope.isMobile,language:$rootScope.language},$rootScope.opts={locale:{applyClass:"btn-green",applyLabel:"Apply",fromLabel:"From",format:"DD-MM-YYYY",toLabel:"To",cancelLabel:"Cancel",customRangeLabel:"Custom range"},singleDatePicker:!0,ranges:{"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()]}},$rootScope.selectedCountry="ARE",$rootScope.countries=[],$rootScope.areaCodes=[];for(var countrycode2="Afghanistan [+93],Algeria [+213],American Samoa [+684],Andorra [+376],Angola [+244],Anguilla [+264],Antigua and Barbuda [+268],Argentina [+54],Armenia [+374],Aruba[+297],Australia [+61],Austria [+43],Azerbaijan [+994],Bahamas [+242],Bahrain [+973],Bangladesh [+880],Barbados [+246],Belarus [+375],Belgium [+32],Belize[+501],Benin [+229],Bermuda [+441],Bhutan [+975],Bolivia [+591],Bosnia and Herzegovina [+387],Botswana [+267],Brazil [+55],British Virgin Islands [+284],Brunei [+673],Bulgaria [+359],Burkina Faso [+226],Burundi [+257],Cambodia [+855],Canada [+1],Cape Verde [+238],Cayman Islands [+345],Central African Republic [+236],Chad [+235],Chile [+56],China [+86],Colombia [+57],Cook Islands [+682],Costa Rica [+506],Croatia [+385],Cuba [+53],Cyprus [+357],Czech Republic [+420],Denmark[+45],Djibouti [+253],Dominican Republic [+767],Ecuador [+593],Egypt [+20],Eritrea [+291],Estonia [+372],Ethiopia [+251],Faroe Islands [+298],Fiji [+679],Finland [+358],France [+33],French Guiana [+594],French Polynesia [+689],Gabon [+241],Gambia [+220],Georgia [+995],Germany [+49],Ghana [+233],Gibraltar [+350],Greece [+30],Greenland [+299],Grenada [+473],Guadeloupe [+590],Guam [+670],Guatemala [+502],Guinea [+245],Guyana [+592],Haiti [+509],Honduras [+504],Hong Kong[+852],Hungary [+36],Iceland [+354],India [+91],Indonesia [+62],Iran [+98],Iraq [+964],Ireland [+353],Israel [+972],Italy [+39],Ivory Coast [+225],Jamaica [+876],Japan [+81],Jordan [+962],Kazakhstan [+7],Kenya [+254],Kiribati [+686],Korea, South [+82],Kuwait [+965],Laos [+856],Latvia [+371],Lebanon [+961],Lesotho [+266],Liberia [+231],Libya [+218],Liechtenstein [+41],Lithuania [+370],Luxembourg [+352],Macau [+853],Macedonia [+389],Malawi [+265],Malaysia [+60],Maldives [+960],Mali [+223],Malta [+356],Marshall Islands [+692],Martinique [+596],Mauritania [+222],Mauritius [+230],Mexico [+52],Micronesia [+691],Moldova [+373],Monaco [+377],Mongolia [+976],Montserrat [+664],Morocco [+212],Mozambique [+258],Myanmar [+95],Namibia [+264],Nauru [+674],Nepal [+977],Netherlands [+31],New Zealand [+64],Nicaragua [+505],Niger [+227],Nigeria [+234],Niue [+683],Northern Mariana Islands [+1670],Norway [+47],Oman [+968],Pakistan [+92],Palau [+680],Palestine [+970],Panama [+507],Papua New Guinea [+675],Paraguay [+595],Peru [+51],Philippines [+63],Poland [+48],Portugal [+351],Puerto Rico [+787],Qatar [+974],Romania [+40],Russia [+7],Rwanda [+250],Saint Lucia [+758],San Marino [+378],Sao Tome and Principe [+239],Saudi Arabia [+966],Senegal [+221],Serbia [+381],Seychelles [+248],Sierra Leone [+232],Singapore [+65],Slovakia [+421],Slovenia [+386],Solomon Islands [+677],Somalia [+252],South Africa [+27],Spain [+34],Sri Lanka [+94],Sudan[+249],Suriname [+597],Swaziland [+268],Sweden [+46],Switzerland [+41],Syria [+963],Taiwan [+886],Tajikistan [+992],Tanzania [+255],Thailand [+66],Togo[+228],Tonga [+676],Trinidad and Tobago [+868],Tunisia [+216],Turkey [+90],Turkmenistan [+993],Uganda [+256],Ukraine [+380],United Arab Emirates [+971],United Kingdom [+44],United States of America [+1],Uruguay [+598],Uzbekistan [+998],Vanuatu [+678],Venezuela [+58],Vietnam [+84],Wallis and Futuna Islands [+681],Western Samoa [+212],Yemen [+967],Zambia [+260],Zimbabwe [+263]",countrycode1=countrycode2.split(","),len=countrycode1.length,i=0;i<len;i++){var optName=countrycode1[i].split("[").shift(),optValue=countrycode1[i].split("[").pop().split("]").shift();$rootScope.countries.push({name:optName}),$rootScope.areaCodes.push(optValue)}$rootScope.updateCountry=function(){console.log($rootScope.selectedCountry),$rootScope.getOfficeId($rootScope.selectedCountry)},$http({method:"GET",url:window.data+"/get_geoip"}).then(function(data){var countryCode=null;$rootScope.getOfficeId(data.data),countryCode=data.data;var selectElement=$("#bugabuga");$rootScope.isMobile&&(selectElement=$("#bugabuga-mobile"));for(var elements=selectElement.msDropDown().data("dd"),flag=!1,i=0;i<elements.length;i++){if(null!=countryCode&&(0==countryCode.toLowerCase().indexOf(elements[i].value.toLowerCase())||0==elements[i].value.toLowerCase().indexOf(countryCode.toLowerCase()))){selectElement.msDropDown().data("dd").set("selectedIndex",i),flag=!0,$rootScope.selectedCountry=elements[i].value;break}i!=elements.length-1||flag||(selectElement.msDropDown().data("dd").set("selectedIndex",elements.length-1),$rootScope.selectedCountry="INTL")}},function(data){console.log(data)});var curLanguage=localStorageService.get("language");"en"===curLanguage||"ar"===curLanguage?$rootScope.language=curLanguage:$rootScope.language="en","ar"==$rootScope.language?$rootScope.title="احجز رحلتك القادمة معنا":$rootScope.title="Book Your Next Flight with Us",$rootScope.selectLanguage=function(lang){$rootScope.language=lang,$translate.use(lang)},function(){""==$location.$$path&&$rootScope.$broadcast("$routeChangeStart")}(),$rootScope.extractData=function(data){var DATA=JSON.parse(data);if(angular.isUndefined(DATA.en))console.log(DATA);else{if("en"===$rootScope.language||angular.isUndefined(DATA.ar))return DATA.en.split(" ").join("_").replace(/[!@#$%^&*]/g,"");if("ar"===$rootScope.language)return DATA.ar.split(" ").join("_").replace(/[!@#$%^&*]/g,"")}return DATA.en.split(" ").join("_").replace(/[!@#$%^&*]/g,"")};var nowDate=new Date;$rootScope.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date(nowDate.getTime()+864e5),startingDay:2},$rootScope.getOfficeId=function(countryCode){var offices=$rootScope.allOffices;if(offices){for(var found=!1,international=-1,i=0;i<offices.length&&!found;i++){var officeCode=offices[i].country_code;officeCode.toLowerCase().indexOf(countryCode.toLowerCase())>=0?($rootScope.amadeus.office_id=offices[i].officeId,$rootScope.multiAmadeus.office_id=offices[i].officeId,$rootScope.oneWayAmadeus.office_id=offices[i].officeId,found=!0):officeCode.toLowerCase().indexOf("international")>=0&&(international=offices[i].officeId)}found||($rootScope.amadeus.office_id=international,$rootScope.multiAmadeus.office_id=international,$rootScope.oneWayAmadeus.office_id=international)}},$("#bugabuga").change(function(){var value=$(this).val();$rootScope.getOfficeId(value)}),$http.get(window.data+"/allFlights").then(function(data){$http.get(window.data+"/airportsData").then(function(airports){$.each(airports.data,function(index,airport){airport.nameCode=airport.name+" "+airport.code}),$.each(data.data,function(index,flight){flight.from.nameCode=flight.from.name+" "+flight.from.code,flight.to.nameCode=flight.to.name+" "+flight.to.code}),$rootScope.flights=data.data,$rootScope.oneWayAmadeusFlights=data.data,$rootScope.multiAmadeusFlights=data.data,$rootScope.airports=airports.data},function(error){console.log(error)})},function(error){console.log(error)}),$rootScope.flightChoosen=!0,$rootScope.filteredFlights=[],$rootScope.multiAmadeusFlightChoosen=!0,$rootScope.multiAmadeusFilteredFlights=[],$rootScope.multiAmadeusFlightChoosen2=!0,$rootScope.multiAmadeusFilteredFlights2=[],$rootScope.oneWayAmadeusFlightChoosen=!0,$rootScope.oneWayAmadeusFilteredFlights=[],$rootScope.$watch("amadeus.from_airport",function(oldValue,newValue){$rootScope.flightChoosen=!0,$rootScope.oneWayAmadeus.from_airport=$rootScope.amadeus.from_airport,$rootScope.multiAmadeus.from_airport=$rootScope.amadeus.from_airport,$rootScope.flights&&$rootScope.filterRoundFlights()}),$rootScope.$watch("amadeus.to_airport",function(oldValue,newValue){$rootScope.multiAmadeus.to_airport=$rootScope.amadeus.to_airport,$rootScope.oneWayAmadeus.to_airport=$rootScope.amadeus.to_airport}),$rootScope.$watch("amadeus.adults",function(oldValue,newValue){for(var value=Number($rootScope.amadeus.adults),array=[],childArray=[],i=0;i<=value;i++)array.push(i.toString());for(var j=0;j<=9-value;j++)childArray.push(j.toString());$rootScope.amadeus.infantsSelection=array,$rootScope.amadeus.childrenSellection=childArray}),$rootScope.$watch("oneWayAmadeus.from_airport",function(oldValue,newValue){$rootScope.oneWayAmadeusFlightChoosen=!0,$rootScope.multiAmadeus.from_airport=$rootScope.oneWayAmadeus.from_airport,$rootScope.amadeus.from_airport=$rootScope.oneWayAmadeus.from_airport,$rootScope.oneWayAmadeusFlights&&$rootScope.filterOneWayFlights()}),$rootScope.$watch("oneWayAmadeus.to_airport",function(oldValue,newValue){$rootScope.multiAmadeus.to_airport=$rootScope.oneWayAmadeus.to_airport,$rootScope.amadeus.to_airport=$rootScope.oneWayAmadeus.to_airport}),$rootScope.$watch("oneWayAmadeus.adults",function(oldValue,newValue){for(var value=Number($rootScope.oneWayAmadeus.adults),array=[],childArray=[],i=0;i<=value;i++)array.push(i.toString());for(var j=0;j<=9-value;j++)childArray.push(j.toString());$rootScope.oneWayAmadeus.infantsSelection=array,$rootScope.oneWayAmadeus.childrenSellection=childArray}),$rootScope.$watch("multiAmadeus.from_airport",function(oldValue,newValue){$rootScope.multiAmadeusFlightChoosen=!0,$rootScope.oneWayAmadeus.from_airport=$rootScope.multiAmadeus.from_airport,$rootScope.amadeus.from_airport=$rootScope.multiAmadeus.from_airport,$rootScope.multiAmadeusFlights&&$rootScope.filterMultiFlights()}),$rootScope.$watch("multiAmadeus.from_airport2",function(oldValue,newValue){$rootScope.multiAmadeusFlightChoosen2=!0,$rootScope.multiAmadeusFlights&&$rootScope.filterMultiFlights2()}),$rootScope.$watch("multiAmadeus.to_airport",function(oldValue,newValue){$rootScope.amadeus.to_airport=$rootScope.multiAmadeus.to_airport,$rootScope.oneWayAmadeus.to_airport=$rootScope.multiAmadeus.to_airport}),$rootScope.$watch("multiAmadeus.adults",function(oldValue,newValue){for(var value=Number($rootScope.multiAmadeus.adults),array=[],childArray=[],i=0;i<=value;i++)array.push(i.toString());for(var j=0;j<=9-value;j++)childArray.push(j.toString());$rootScope.multiAmadeus.infantsSelection=array,$rootScope.multiAmadeus.childrenSellection=childArray});var req={method:"POST",url:window.data+"/doAction",data:JSON.stringify($rootScope.amadeus)};$rootScope.submitFlightStatus=function(){$rootScope.flightStatus.language=$rootScope.language;var flightReq={url:window.data+"/flightStatus",data:$rootScope.flightStatus,method:"POST"};$http(flightReq).then(function(data){console.log($rootScope.amaduesUrl+data.data.params);var link=$rootScope.amaduesUrl+data.data.params;$timeout(function(){$window.location.href=link},200)},function(error){console.log(error)})},$rootScope.submitBooking=function(){var req={method:"POST",url:window.data+"/bookings",data:JSON.stringify($rootScope.booking)};$http(req).then(function(data){var link;link=$rootScope.isMobile?$rootScope.amaduesMobileUrlBokking+data.data.params:$rootScope.amaduesUrlBokking+data.data.params,$timeout(function(){$window.location.href=link},200)},function(error){console.log(error)})},$rootScope.submitCheckin=function(){var req={method:"POST",url:window.data+"/checkin",data:JSON.stringify($rootScope.checkin)};$http(req).then(function(data){var link;link=$rootScope.isMobile?$rootScope.amaduesMobileUrlCheckin+data.data.params:$rootScope.amaduesUrlCheckin+data.data.params,$timeout(function(){$window.location.href=link},200)},function(error){console.log(error)})},$rootScope.submitOneWayAmadeus=function(){return angular.isUndefined($rootScope.oneWayAmadeus.from_airport)||angular.isUndefined($rootScope.oneWayAmadeus.to_airport)?void toastr.error("Please Choose valid from/to destinations","Can't complete your request"):($rootScope.oneWayAmadeus.trip_type="oneway",$rootScope.oneWayAmadeus.travellers=Number($rootScope.oneWayAmadeus.adults)+Number($rootScope.oneWayAmadeus.children),$rootScope.oneWayAmadeus.language=$rootScope.language,req.data=$rootScope.oneWayAmadeus,void $rootScope.submitAmadeus($rootScope.oneWayAmadeus))},$rootScope.submitMultiAmadeus=function(){return angular.isUndefined($rootScope.multiAmadeus.from_airport)||angular.isUndefined($rootScope.multiAmadeus.to_airport)?void toastr.error("Please Choose valid from/to destinations","Can't complete your request"):angular.isUndefined($rootScope.multiAmadeus.from_airport2)||angular.isUndefined($rootScope.multiAmadeus.to_airport2)?void toastr.error("Please Choose valid second from/to destinations","Can't complete your request"):($rootScope.multiAmadeus.trip_type="multi",$rootScope.multiAmadeus.language=$rootScope.language,$rootScope.multiAmadeus.travellers=Number($rootScope.multiAmadeus.adults)+Number($rootScope.multiAmadeus.children),req.data=$rootScope.multiAmadeus,void $rootScope.submitAmadeus($rootScope.multiAmadeus))},$rootScope.submitRoundAmadeus=function(){return angular.isUndefined($rootScope.amadeus.from_airport)||angular.isUndefined($rootScope.amadeus.to_airport)?void toastr.error("Please Choose valid from/to destinations","Can't complete your request"):($rootScope.amadeus.trip_type="round",$rootScope.amadeus.language=$rootScope.language,$rootScope.amadeus.travellers=Number($rootScope.amadeus.adults)+Number($rootScope.amadeus.children),req.data=$rootScope.amadeus,void $rootScope.submitAmadeus($rootScope.amadeus))},$rootScope.submitTableRoundAmadeus=function(){return angular.isUndefined($rootScope.amadeus.from_airport)||angular.isUndefined($rootScope.amadeus.to_airport)?void toastr.error("Please Choose valid from/to destinations","Can't complete your request"):($rootScope.amadeus.embed="table",void $rootScope.submitRoundAmadeus())},$rootScope.submitTableOneWayAmadeus=function(){return angular.isUndefined($rootScope.amadeus.from_airport)||angular.isUndefined($rootScope.amadeus.to_airport)?void toastr.error("Please Choose valid from/to destinations","Can't complete your request"):($rootScope.oneWayAmadeus.embed="table",void $rootScope.submitOneWayAmadeus())},$rootScope.toggleMenu=function(){},$rootScope.submitAmadeus=function(object){var showModal=!1,flights=[];"round"==object.trip_type?flights=$rootScope.flights:"oneway"==object.trip_type?flights=$rootScope.oneWayAmadeusFlights:"multi"==object.trip_type&&(flights=$rootScope.multiAmadeusFlights);for(var i=0;i<flights.length;i++)flights[i].from.code===object.from_airport&&flights[i].to.code===object.to_airport&&flights[i].showSaudiModal&&(showModal=!0);if(showModal){var template="myModalContentEn.html";"ar"==$rootScope.language&&(template="myModalContentAr.html");var modalInstance=$uibModal.open({animation:!0,templateUrl:template,controller:"ModalInstanceCtrl",size:"lg"});modalInstance.result.then(function(go){go&&$http(req).then(function(data){$rootScope.oneWayAmadeus.embed="",$rootScope.amadeus.embed="",console.log($rootScope.amaduesUrl+data.data.params);var link=$rootScope.amaduesUrl+data.data.params;$timeout(function(){$window.location.href=link},200)},function(error){$rootScope.oneWayAmadeus.embed="",$rootScope.amadeus.embed="",console.log(error)})},function(){console.log("Modal dismissed at: "+new Date)})}else $http(req).then(function(data){$rootScope.oneWayAmadeus.embed="",$rootScope.amadeus.embed="",console.log($rootScope.amaduesUrl+data.data.params);var link=$rootScope.amaduesUrl+data.data.params;$timeout(function(){$window.location.href=link},200)},function(error){$rootScope.oneWayAmadeus.embed="",$rootScope.amadeus.embed="",console.log(error)})},$rootScope.submitCarouselAmadeus=function(data){var today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();dd++,dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm);var today=yyyy+"-"+mm+"-"+dd+"T22:00:00.000Z",amadeus={};amadeus.trip_type="oneway",amadeus.language=$rootScope.language,amadeus.adults=1,amadeus.departing_date=today,amadeus.from_airport=data.fromAirport,amadeus.to_airport=data.toAirport,amadeus.travellers=1,amadeus.office_id=$rootScope.amadeus.office_id,amadeus.infants=0,amadeus.office_id=$rootScope.amadeus.office_id,amadeus.carousel=!0,amadeus.mobile=$rootScope.isMobile;var reques={method:"POST",url:window.data+"/doAction",data:amadeus};console.log($http.defaults.headers),$http(reques).then(function(data){console.log($rootScope.amaduesUrl+data.data.params);var link=$rootScope.amaduesUrl+data.data.params;$timeout(function(){$window.location.href=link},200)},function(error){console.log(error)})},$rootScope.submitOfferAmadeus=function(offer){var airports=[];$.each(offer.flightss,function(index,flight){var from=flight.from;delete flight.from.$$hashKey,console.log(from),console.log(airports),console.log(containsObject(from,airports)),containsObject(from,airports)||airports.push(from)});var template="components/static-pages/offerModal.html",modalInstance=$uibModal.open({animation:!0,templateUrl:template,controller:"OfferModalCtrl",size:"lg",resolve:{offer:function(){return offer},airports:function(){return airports}}});modalInstance.result.then(function(link){link&&(console.log(link),$timeout(function(){$window.location.href=link},200))},function(){console.log("Modal dismissed at: "+new Date)})},$rootScope.submitTestOfferAmadeus=function(data){var template="components/static-pages/offerModal2.html",modalInstance=$uibModal.open({animation:!0,templateUrl:template,controller:"OfferModalCtrl2",size:"lg"});modalInstance.result.then(function(link){link&&(console.log(link),$timeout(function(){$window.location.href=link},200))},function(){console.log("Modal dismissed at: "+new Date)})},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$rootScope.noOfMonths=1:$rootScope.noOfMonths=2,$http({method:"GET",url:window.data+"/newsData/"}).then(function(data){$rootScope.news=data.data,$(".ticker").newsTicker({speed:5e3,effect:"slide",delay_after:1e3,duration:5e3})},function(error){console.log(error)}),$rootScope.trustHtml=function(body){if(body){var json=JSON.parse(body);return"en"==$rootScope.language?$sce.trustAsHtml(json.en):$sce.trustAsHtml(json.ar)}},$rootScope.filterRoundFlights=function(){var selectedCode=$rootScope.amadeus.from_airport,selectedName="";$rootScope.amadeus.to_airport="",$rootScope.filteredFlights=[],$.each($rootScope.airports,function(index,airport){airport.code==selectedCode&&(selectedName=airport.name)});for(var i=0;i<$rootScope.flights.length;i++)$rootScope.flights[i].from.name===selectedName&&$rootScope.filteredFlights.push($rootScope.flights[i].to);$rootScope.amadeus.to_airport=$rootScope.filteredFlights[0].code,$rootScope.flightChoosen=!1},$rootScope.filterOneWayFlights=function(){var selectedCode=$rootScope.oneWayAmadeus.from_airport;$rootScope.oneWayAmadeus.to_airport="";var selectedName="";$rootScope.oneWayAmadeusFilteredFlights=[],$.each($rootScope.airports,function(index,airport){airport.code==selectedCode&&(selectedName=airport.name)});for(var i=0;i<$rootScope.oneWayAmadeusFlights.length;i++)$rootScope.oneWayAmadeusFlights[i].from.name===selectedName&&$rootScope.oneWayAmadeusFilteredFlights.push($rootScope.oneWayAmadeusFlights[i].to);$rootScope.oneWayAmadeus.to_airport=$rootScope.oneWayAmadeusFilteredFlights[0].code,$rootScope.oneWayAmadeusFlightChoosen=!1},$rootScope.filterMultiFlights=function(){var selectedCode=$rootScope.multiAmadeus.from_airport;$rootScope.multiAmadeus.to_airport="",$rootScope.multiAmadeusFilteredFlights=[];var selectedName="";$.each($rootScope.airports,function(index,airport){airport.code==selectedCode&&(selectedName=airport.name)});for(var i=0;i<$rootScope.multiAmadeusFlights.length;i++)$rootScope.multiAmadeusFlights[i].from.name===selectedName&&$rootScope.multiAmadeusFilteredFlights.push($rootScope.multiAmadeusFlights[i].to);$rootScope.multiAmadeus.to_airport=$rootScope.multiAmadeusFilteredFlights[0].code,$rootScope.multiAmadeusFlightChoosen=!1},$rootScope.filterMultiFlights2=function(){var selectedCode=$rootScope.multiAmadeus.from_airport2;$rootScope.multiAmadeusFilteredFlights2=[];var selectedName="";$.each($rootScope.airports,function(index,airport){airport.code==selectedCode&&(selectedName=airport.name)});for(var i=0;i<$rootScope.multiAmadeusFlights.length;i++)$rootScope.multiAmadeusFlights[i].from.name===selectedName&&$rootScope.multiAmadeusFilteredFlights2.push($rootScope.multiAmadeusFlights[i].to);$rootScope.multiAmadeus.to_airport2=$rootScope.multiAmadeusFilteredFlights2[0].code,$rootScope.multiAmadeusFlightChoosen2=!1}}]).filter("truncate",["$rootScope",function($rootScope){return function(data){var result=data;return data.length>40&&$rootScope.isMobile&&(result=data.substring(0,37)+"..."),result}}]).filter("translateContent",["$rootScope",function($rootScope){return function(data,language){var output;if(null!=data&&angular.isDefined(data)&&angular.isDefined(data.name)&&angular.isDefined(data.code))try{var name=JSON.parse(data.name);output="ar"===language?name.ar+" ("+data.code+")":name.en+" ("+data.code+")"}catch(e){output=data.code}else try{var objectData=JSON.parse(data);output="ar"==language?objectData.ar:objectData.en}catch(e){output=data}return output}}]),angular.module("myApp").controller("ModalInstanceCtrl",["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.enabled=!1,$scope.toggleButton=function(){$scope.enabled=!$scope.enabled},$scope.ok=function(){$uibModalInstance.close(!0)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]).controller("OfferModalCtrl",["$scope","$uibModalInstance","$rootScope","$http","offer","airports",function($scope,$uibModalInstance,$rootScope,$http,offer,airports){$scope.enabled=!1,$scope.date=new Date;var departingDate=new Date;departingDate.setDate(departingDate.getDate()+1),$scope.flightsData=offer.flightss,$scope.offerAirports=airports,$scope.endDate=offer.endDate,$scope.offerFilteredFlights=[],console.log(offer.flightss),console.log(airports),$scope.filterOfferFlights=function(){var selectedCode=$scope.offer.from_airport,selectedName="";$scope.offer.to_airport="",$scope.filteredFlights=[],$.each($scope.offerAirports,function(index,airport){airport.code==selectedCode&&(selectedName=airport.name)});for(var i=0;i<$scope.flightsData.length;i++)$scope.flightsData[i].from.name===selectedName&&$scope.offerFilteredFlights.push($scope.flightsData[i].to);$scope.offer.to_airport=$scope.offerFilteredFlights[0].code,$scope.offerFlightChoosen=!1},$scope.$watch("offer.from_airport",function(newValue,oldValue){angular.isDefined(newValue)&&($scope.offerFlightChoosen=!0,$scope.filterOfferFlights())}),$scope.offer={adults:"1",travellers:"1",children:"0",infants:"0",departing_date:departingDate,office_id:$rootScope.oneWayAmadeus.office_id,infantsSelection:["0","1"],childrenSellection:["0","1","2","3","4","5","6","7","8"],mobile:$rootScope.isMobile},$scope.$watch("offer.adults",function(oldValue,newValue){for(var value=Number($scope.offer.adults),array=[],childArray=[],i=0;i<=value;i++)array.push(i.toString());for(var j=0;j<=9-value;j++)childArray.push(j.toString());$scope.offer.infantsSelection=array,$scope.offer.childrenSellection=childArray}),$scope.submitData=function(){$scope.offer.travellers=Number($scope.offer.adults)+Number($scope.offer.children),$scope.offer.language=$rootScope.language,$scope.offer.trip_type="oneway";var reques={method:"POST",url:window.data+"/doAction",data:$scope.offer};$http(reques).then(function(data){console.log("https://book.nileair.com/plnext/NileAir/Override.action?"+data.data.params);var link="https://book.nileair.com/plnext/NileAir/Override.action?"+data.data.params;$uibModalInstance.close(link)},function(error){console.log(error)})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]).controller("OfferModalCtrl2",["$scope","$uibModalInstance","$rootScope","$http",function($scope,$uibModalInstance,$rootScope,$http){$scope.enabled=!1,$scope.date=new Date;var departingDate=new Date;departingDate.setDate(departingDate.getDate()+1),$scope.offer={adults:"1",travellers:"1",children:"0",infants:"0",departing_date:departingDate,office_id:$rootScope.oneWayAmadeus.office_id,infantsSelection:["0","1"],childrenSellection:["0","1","2","3","4","5","6","7","8"]
},$scope.$watch("offer.adults",function(oldValue,newValue){for(var value=Number($scope.offer.adults),array=[],childArray=[],i=0;i<=value;i++)array.push(i.toString());for(var j=0;j<=9-value;j++)childArray.push(j.toString());$scope.offer.infantsSelection=array,$scope.offer.childrenSellection=childArray}),$scope.$watch("offer.from_airport",function(oldValue,newValue){$rootScope.oneWayAmadeusFlightChoosen=!0,$rootScope.oneWayAmadeus.from_airport=$scope.offer.from_airport,$rootScope.oneWayAmadeusFlights&&$rootScope.filterOneWayFlights()}),$scope.submitData=function(){$scope.offer.travellers=Number($scope.offer.adults)+Number($scope.offer.children),$scope.offer.language=$rootScope.language,$http({method:"POST",url:"https://nileair.herokuapp.com/api/doTestOfferAction",data:$scope.offer}).then(function(data){console.log("https://book.nileair.com/plnext/NileAir/Override.action?"+data.data.params);var link="https://book.nileair.com/plnext/NileAir/Override.action?"+data.data.params;$uibModalInstance.close(link)},function(error){console.log(error)})},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]).directive("uiSelectRequired",function(){return{require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$validators.uiSelectRequired=function(modelValue,viewValue){if(attr.uiSelectRequired){var isRequired=scope.$eval(attr.uiSelectRequired);if(0==isRequired)return!0}var determineVal;if(angular.isArray(modelValue))determineVal=modelValue;else{if(!angular.isArray(viewValue))return!1;determineVal=viewValue}return determineVal.length>0}}}}),angular.module("angular-kaarousel").run(["$templateCache",function($templateCache){$templateCache.put("app/components/kaarousel/templates/angular-kaarousel.html",'<kaarousel-wrapper><kaarousel-slider-container class="carousel-inner"><kaarousel-slider ng-transclude="" class="kaarousel-slider"></kaarousel-slider></kaarousel-slider-container><kaarousel-nav ng-class="{\'is-hidden\': !kc.navigation.visible}"><kaarousel-prev class="left carousel-control" ng-click="kc.move(null, true)" ng-class="{\'is-hidden\': !kc.navigation.prev.visible}"><span class="glyphicon glyphicon-chevron-left"></kaarousel-prev><kaarousel-next class="right carousel-control" ng-click="kc.move(true, true)" ng-class="{\'is-hidden\': !kc.navigation.next.visible}"><span class="glyphicon glyphicon-chevron-right"></kaarousel-next></kaarousel-nav><kaarousel-pager ng-class="{\'is-hidden\': !kc.pager.visible}"><ul><li ng-repeat="i in kc.getPages() track by $index" ng-click="kc.movePage($index)" ng-class="{selected: $index === kc.currentPage}">{{$index}}</li></ul></kaarousel-pager></kaarousel-wrapper>')}]),angular.module("myApp").config(["$translateProvider",function($translateProvider){$translateProvider.translations("en",{languages:{en:"English",ar:"العربية"},app:{nileAir:"Nile Air",latestNews:"Latest News",latestNewsDesc:"Nile Air releases its latest news periodically to keep you up to date.",specialOffers:"Special offers",specialOffersDesc:"You get the best available prices on some of our most popular destinations.",services:"Services",servicesDesc:"Our aim is to deliver an unique experience that exceeds the expectations.",about:"About Nile Air",aboutDesc:"The leading private Egyptian full service airline.",destinations:"Destinations",destinationsDesc:"Discover Nile Air's destinations covering Middle East, Gulf &amp; Africa",contactUs:"Contact Us",contactUsDesc:"whenever you’re looking for answers you’ll find many ways to contact us righ...",fullname:"Full Name",email:"Email",subscribe:"Subscribe",excoffers:"Exclusive Offers",newsletter:"Subscribe to our newsletter to receive exclusive offers and the latest news on our products and services.",footer:"© 2020 Nile Air. All rights reserved.",noResultsMessage:"Sorry, Your search returns no results, please try again",addPassenger:"Add Passenger",submit:"Submit"},search:{flightNumber:"Flight Number",from:"From (Select Departure City)",to:"To (Select Arrival City)",flightBooking:"Flight Booking",roundtrip:"Round Trip",oneway:"One Way",departing:"Departing",returning:"Returning",multicity:"Multi City",adult:"Adult",child:"Child",premium:"Show Premium Business class only",childage:"2-11 years",adultage:"12+ years",infantage:"under 2 years",infant:"Infant",search:"Search",flightStatus:"FLIGHT STATUS",flightCheckin:"CHECK-IN",manageBookings:"MANAGE BOOKING",myBookings:"Manage my Bookings",comingsoon:"Coming Soon",timetable:"Time Table","class":"Class",economy:"Economy",business:"Business",sortBy:"Sort By",price:"By Price",schedule:"By Schedule",flexible:"Flexible Dates ( For Better Fare Options )",refundType:"Refund Type",telephone:"Telephone",code:"Code",fullname:"Full Name",email:"Email",confirmEmail:"Confirm Email",bookingRef:"Booking Reference",passengerName:"Passenger Name",ticketNumber:"Ticket Number",comments:"Comments",requestRefund:"Request Refund",country:"Country",next:"Next",previous:"Previous"},news:{readmore:"Read More",loadMore:"Load More!"},refund:{term1:"I understand the fare conditions of my ticket/document relating to refunds advised at the time of purchase. If my ticket/document is non-refundable, I understand I will only receive a refund of the applicable unused taxes.",term2:"",term3:"",term4:"I confirm that by requesting a refund my entire booking will be cancelled.",term5:"I understand that the refund process cannot be reversed once I have submitted this refund request."},bookings:{lastName:"Last Name",refNumberLabel:"Ticket Number / Reservation Number",refNumber:"Ticket Number (321-12345678) / Reservation Number"},checkin:{lastName:"Last Name",refNumberLabel:"Ticket Number / Reservation Number",refNumber:"Ticket Number (321-12345678) / Reservation Number"},feedback:{inquiry:"Select the nature of inquiry: ",feedbacktype:"Please Select .... ",website:"Website Feedback",general:"Feedback",webfeedback:"Feedback Type ....",accessability:"Accessibility",booking:"Booking",content:"Incorrect/Missing content",mobile:"Mobile website",checkin:"Check-in",payment:"Payment",other:"Other",selecttitle:"Select Title ....",mr:"Mr",mrs:"Mrs",miss:"Miss",ms:"Ms",brigadier:"Brigadier",captain:"Captain",colonel:"colonel",doctor:"Doctor",generaltitle:"General",professor:"Professor",shaikha:"Shaikha",sheikh:"Shaikha",firstname:"First Name",lastname:"Last Name",send:"Send",relatedto:"Related To ....",airport:"Airport",onboard:"On Board",baggage:"Baggage Services",flightop:"Flight Delays and Disruptions",websiteop:"Website and E-commerce",reservation:"Reservation & Ticketing",flightnumber:"Flight Number",travelclass:"Travel Class",economy:"Economy",business:"Business"}}),$translateProvider.translations("ar",{languages:{en:"English",ar:"العربية"},app:{nileAir:" النيل للطيران",latestNews:"احدث الاخبار",latestNewsDesc:"كن على إطلاع دائم بأحدث أخبار النيل للطيران عن طريق نشرتنا الدورية.",specialOffers:"عروض مميزة",specialOffersDesc:"      يمكنك الحصول على أفضل الأسعار المتاحة على بعض الوجهات الأكثر رواجاً مع النيل...",services:"الخدمات",servicesDesc:"هدفنا هو تقديم تجربة فريدة من نوعها عن طريق خدمات مميزة تتجاوز توقعاتك.",about:"عن النيل للطيران",aboutDesc:"النيل للطيران هي الشركة الرائدة بمصر والاختيار الأول للمسافر جواً. ",destinations:"وجهاتنا",destinationsDesc:"أكتشف وجهات النيل للطيران التي تشمل الشرق الأوسط ، الخليج و أفريقيا.",contactUs:"أتصل بنا",contactUsDesc:"نساعدك بشتى الطرق لتتمكن من التواصل معنا و الوصول لإجابات أستفساراتك و اسألت...",fullname:"الاٍسم",email:"البريد الالكتروني",subscribe:"اٍشترك",excoffers:"افضل العروض",newsletter:"إشترك معنا في خدمة البريد الاسبوعي ليصلك كل ماهو جديد عن عروضنا وآخر أخبارنا.",footer:"النيل للطيران ©. جميع الحقوق محفوظة ٢٠٢٠",noResultsMessage:"عذراً لاتوجد نتائج للبحث، يرجى المحاولة مرة أخرى",addPassenger:"اضف مسافر",submit:"تنفيذ"},search:{flightNumber:"رقم الرحلة",from:"من (اختر مدينة المغادرة)",to:"إلى (اختر مدينة الوجهة)",flightBooking:"احجز رحلة",myBookings:"إدارة الحجز",roundtrip:"ذهاب و عودة",oneway:"اتجاه واحد",departing:"تاريخ المغادرة",returning:"تاريخ العودة",multicity:"مدن متعددة",adult:"بالغ",child:"طفل",premium:"اعرض رحلات درجة رجال الأعمال فقط",adultage:"12 + عاما",childage:"2-11 عاما",infantage:"اقل من سنتين",infant:"رضيع",search:"ابحث الان!",flightStatus:"حالة الرحلات",flightCheckin:" إجراءات السفر",manageBookings:"إدارة الحجز",comingsoon:"قريباً",timetable:"جدول الرحلات","class":"الدرجة",economy:"الاقتصادية",business:"رجال اعمال",sortBy:" ترتيب حسب",price:"السعر",schedule:"الجدول الزمني",flexible:"مواعيد مرنة",refundType:"نوع الاسترجاع",code:"الكود",telephone:"رقم الهاتف",fullname:"الاسم",email:"البريد الالكتروني",confirmEmail:"تاكيد البريد",bookingRef:"رفم الحجز",passengerName:"اسم المسافر",ticketNumber:"رقم التذكرة",comments:"التعليقات",requestRefund:"ارسل",country:"الدولة",next:"التالي",previous:"السابق"},news:{readmore:"المزيد",loadMore:"المزيد من الاخبار"},refund:{term1:".أعلم شروط سعر التذكرة / الوثيقة الخاصة بي فيما يتعلق باسترداد الأموال كما هو موضح عند إجراء الحجز. إذا كانت التذكرة / الوثيقة الخاصة بي غير قابلة للاسترداد أدرك أنني سأسترد فقط تعويضا عن الضرائب غير المستخدمة.",term2:"عند إجراء الحجز. إذا كانت التذكرة / الوثيقة الخاصة بي غير قابلة للاسترداد،",term3:"أدرك أنني سأسترد فقط تعويضا عن الضرائب غير المستخدمة.",term4:"أنا أدرك أنه سيتم إلغاء كامل الحجز الخاص بي بموجب طلب الاسترداد الذي تقدمت به.",term5:"أدرك أنه بمجرد قيامي بإرسال طلب الاسترداد هذا فإنه لا يمكن التراجع عن الطلب."},bookings:{lastName:"اسم العائلة للمسافر",refNumberLabel:"رقم التذكرة/ رقم الحجز",refNumber:"رقم التذكرة/ رقم الحجز"},checkin:{lastName:"اسم العائلة للمسافر",refNumberLabel:"رقم التذكرة/ رقم الحجز",refNumber:"رقم التذكرة/ رقم الحجز"},feedback:{inquiry:"اختر نوع الشكوى:  ",feedbacktype:"نوع الشكوى ....",website:"شكوى من الموقع",general:" شكوى عامة",webfeedback:"نوع الملاحظة ....",accessability:"إمكانية الدخول ",booking:"حجز ",content:"معلومات غير صحيحة/ مفقودة ",mobile:"الصفحة على الهاتف الجوال",checkin:"تسجيل الدخول",payment:"الدفع ",other:"مسائل أخرى ",selecttitle:"اللقب ....",mr:"Mr",mrs:"Mrs",miss:"Miss",ms:"Ms",brigadier:"Brigadier",captain:"Captain",colonel:"colonel",doctor:"Doctor",generaltitle:"General",professor:"Professor",shaikha:"Shaikha",sheikh:"Shaikha",firstname:"الاسم ",lastname:"اسم العائلة",send:"ارسال",relatedto:"بخصوص ....",airport:"في المطار",onboard:"على متن الطائرة",baggage:"خدمات الأمتعة",flightop:"تأخر الرحلات",websiteop:"التجارة الإلكترونية و خدمات الموقع",reservation:"الحجوزات",flightnumber:"رقم الرحلة",travelclass:"درجة السفر",economy:"الإقتصادية",business:"رجال الأعمال"}}),$translateProvider.preferredLanguage("en"),$translateProvider.useSanitizeValueStrategy("sanitizeParameters")}]),angular.module("myApp.home",["ngTouch","ngSanitize","ngRoute","ui.select","ui.bootstrap"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/home",{templateUrl:"components/home/home.html",controller:"HomeCtrl"}).when("/:lang/news",{templateUrl:"components/static-pages/news-index.html",controller:"NewsCtrl"}).when("/:lang/search",{templateUrl:"components/static-pages/search.html",controller:"SearchCtrl"}).when("/:lang/timetable",{templateUrl:"components/static-pages/timetable.html",controller:"SearchCtrl"})}]).controller("HomeCtrl",["$rootScope","$scope","$timeout","$compile","localStorageService","$http",function($rootScope,$scope,$timeout,$compile,localStorageService,$http){$rootScope.activeTab=1,$scope.home=!0,$scope.carouselSlides=4,$(window).resize(function(){window.innerWidth<=800?$scope.carouselSlides=1:window.innerWidth<=992?$scope.carouselSlides=2:$scope.carouselSlides=4}),window.innerWidth<=800?$scope.carouselSlides=1:window.innerWidth<=992?$scope.carouselSlides=2:$scope.carouselSlides=4,!localStorageService.get("subscribed")&&$rootScope.configuration.popupSubscription&&$("#newsLetterModal").modal("show"),$scope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg","http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/bcbc.jpg","http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/jizan.jpg","http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/abha.jpg"],$scope.data=[{from:'{"ar":"من   الكويت", "en": "From   Kuwait"}',to:'{"ar":"الاسكندرية", "en": "Alexandria"}',fromAirport:"KWI",toAirport:"HBE",price:'{"ar":" 23.65 دينار ", "en": " 23.65 KWD"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   الكويت", "en": "From   Kuwait"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"KWI",toAirport:"CAI",price:'{"ar":"34.65 دينار", "en": " 34.65 KWD"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   الجوف", "en": "From   Al-Jawf"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"AJF",toAirport:"CAI",price:'{"ar":" 486.00 ريال", "en": "486.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   تبوك", "en": "From   Tabuk"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"TUU",toAirport:"CAI",price:'{"ar":" 486.00 ريال", "en": "486.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   هفوف", "en": "From   Hofof"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"HOF",toAirport:"CAI",price:'{"ar":" 536.00 ريال", "en": " 536.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من  القصيم", "en": "From   Qassim"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"ELQ",toAirport:"CAI",price:'{"ar":" 486.00 ريال", "en": "486.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   جدة", "en": "From Jeddah"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"JED",toAirport:"CAI",price:'{"ar":"486.00  ريال", "en": "486.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   طائف", "en": "From   Taif"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"TIF",toAirport:"CAI",price:'{"ar":" 486.00 ريال", "en": "486.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   ينبع", "en": "From   Yanbu"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"YNB",toAirport:"CAI",price:'{"ar":"436.00  ريال", "en": "436.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   جدة", "en": "From Jeddah"}',to:'{"ar":"الاسكندرية", "en": "Alexandria"}',fromAirport:"JED",toAirport:"HBE",price:'{"ar":"436.00 ريال ", "en": "436.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   ينبع", "en": "From Yanbu"}',to:'{"ar":"الاسكندرية", "en": "Alexandria"}',fromAirport:"YNB",toAirport:"HBE",price:'{"ar":"436.00 ريال  ", "en": "436.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من   القصيم", "en": "From   Qassim"}',to:'{"ar":"الاسكندرية", "en": "Alexandria"}',fromAirport:"ELQ",toAirport:"HBE",price:'{"ar":"436.00 ريال ", "en": "436.00 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من ابها", "en": "From Abha"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"AHB",toAirport:"CAI",price:'{"ar":"536 ريال", "en": "536 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من جازان", "en": "From Gizan"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"GIZ",toAirport:"CAI",price:'{"ar":"536 ريال", "en": "536 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من الرياض", "en": "From Riyadh"}',to:'{"ar":"شرم الشيخ", "en": "Sharm El Sheikh"}',fromAirport:"RUH",toAirport:"SSH",price:'{"ar":"571 ريال", "en": "571 SAR"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من العين", "en": "From Al Ain"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"AAN",toAirport:"CAI",price:'{"ar":"550  درهم", "en": "550 AED"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من أسطنبول", "en": "From Istanbul"}',to:'{"ar":"القاهرة", "en": "Cairo"}',fromAirport:"SAW",toAirport:"CAI",price:'{"ar":"127  دولار", "en": "127 USD"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من القاهرة", "en": "From Cairo"}',to:'{"ar":"شرم الشيخ", "en": "Sharm El Sheikh"}',fromAirport:"CAI",toAirport:"SSH",price:'{"ar":"411 جنيهاً", "en": "411 EGP"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'},{from:'{"ar":"من القاهرة", "en": "From Cairo"}',to:'{"ar":"الغردقة", "en": "Hurghada"}',fromAirport:"CAI",toAirport:"HRG",price:'{"ar":"411 جنيهاً", "en": "411 EGP"}',direction:'{"ar":"ذهاب فقط", "en": "One Way"}'}],$http.get(window.data+"/exclusive-offers").then(function(data){$scope.data=data.data})}]).controller("SearchCtrl",["$rootScope","$scope","$http",function($rootScope,$scope,$http){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"],$rootScope.home=!1,$http.get(window.data+"/flights").then(function(data){$http.get(window.data+"/airports").then(function(airports){$scope.flights=data.data,$scope.airports=airports.data},function(error){console.log(error)})},function(error){console.log(error)}),$scope.flightChoosen=!0,$scope.airport={selected:""},$scope.filteredFlight={selected:""},$scope.filteredFlights=[],$scope.departing="",$scope.returning="",$scope.$watch("airport.selected",function(oldValue,newValue){$scope.flightChoosen=!0,$scope.flights&&$scope.filterFlights()}),$scope.filterFlights=function(){for(var selectedId=$scope.airport.selected,i=0;i<$scope.flights.length;i++)$scope.flights[i].from.name===$scope.airports[selectedId-1].name&&$scope.filteredFlights.push($scope.flights[i].to);$scope.flightChoosen=!1}}]),angular.module("myApp.staticPages",["ngRoute","ui.select","ui.bootstrap","toastr"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/news",{templateUrl:"components/static-pages/news-index.html",controller:"NewsCtrl"}).when("/:lang/news/:id/:title",{templateUrl:"components/static-pages/news-detail.html",controller:"NewsDetailCtrl"})}]).controller("NewsCtrl",["$rootScope","$scope","$http","$routeParams","$timeout","toastr",function($rootScope,$scope,$http,$routeParams,$timeout,toastr){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"],$scope.home=!1,$scope.news=[],$scope.select=function($event){$scope.home=!0},$rootScope.activeTab=0,"ar"==$rootScope.language?$rootScope.title="الاخبار":$rootScope.title="News",$scope.curPage=0,$scope.noMoreNews=!1,$scope.loadNews=function(pageNumber){$http({method:"GET",url:window.data+"/newsData/",params:{page:pageNumber,size:5}}).then(function(data){var newsData=data.data;if(!(angular.isDefined(newsData)&&newsData.length>0))return $scope.noMoreNews=!0,void toastr.error("No More News Found","Thank you");for(var i=0;i<newsData.length;i++){if("ar"===$rootScope.language){var title=newsData[i].title;if(!JSON.parse(title).ar||""===JSON.parse(title).ar)continue}newsData[i].is_published&&$scope.news.push(newsData[i])}},function(error){console.log(error)})},$scope.formatSlug=function(title){return title.split(" ").join("_")},$scope.loadMoreNews=function(){$scope.curPage++,$scope.loadNews($scope.curPage)},$timeout(function(){$("#flighttab").removeClass("active")},1e3),$scope.loadNews($scope.curPage)}]).controller("NewsDetailCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"],$scope.home=!1,$timeout(function(){$("#flighttab").removeClass("active")},1e3),$http({method:"GET",url:window.data+"/newsData/"+$routeParams.id}).then(function(data){$scope.newsDetail=data.data,"ar"==$rootScope.language?$rootScope.title=JSON.parse($scope.newsDetail.title).ar:$rootScope.title=JSON.parse($scope.newsDetail.title).en,$rootScope.metatags={description:$scope.newsDetail.title,keywords:$scope.newsDetail.title.split(" ")}},function(error){console.log(error)})}]),angular.module("myApp.flight",["ngRoute"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/flight",{templateUrl:"components/flight/flight.html",controller:"FlightCtrl"})}]).controller("FlightCtrl",["$rootScope","$scope",function($rootScope,$scope){$scope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"]}]),angular.module("myApp.staticPages").directive("departingDatePicker",["$filter","$rootScope",function($filter,$rootScope){return{restrict:"AE",scope:{startDate:"=startDate",flightStatus:"=flightStatus"},link:function(scope,element,attributes){element.datepicker({dateFormat:"yy-mm-dd",numberOfMonths:$rootScope.noOfMonths,minDate:new Date,maxDate:new Date((new Date).setFullYear((new Date).getFullYear()+1)),onSelect:function(date){var newDate=new Date(new Date(date).getTime()+2592e5);if(scope.$root.amadeus.returning_date=$filter("date")(newDate,"yyyy-MM-dd"),scope.$root.multiAmadeus.returning_date=$filter("date")(newDate,"yyyy-MM-dd"),scope.flightStatus){var curDate=new Date(date);scope.$root.flightStatus.departing_date=$filter("date")(curDate,"yyyy-MM-dd")}scope.startDate&&(scope.startDate=date),scope.$apply()}})}}}]).directive("regularDatePicker",["$filter","$rootScope",function($filter,$rootScope){return{restrict:"AE",link:function(scope,element,attributes){element.datepicker({dateFormat:"yy-mm-dd",numberOfMonths:$rootScope.noOfMonths,maxDate:new Date((new Date).setFullYear((new Date).getFullYear()+1))})}}}]).directive("returningDatePicker",["$rootScope",function($rootScope){return{restrict:"AE",scope:{endDate:"=endDate",startDate:"=startDate"},link:function(scope,element,attributes){scope.$watch("startDate",function(newValue,oldValue){element.datepicker("option","minDate",newValue)}),element.datepicker({dateFormat:"yy-mm-dd",numberOfMonths:$rootScope.noOfMonths,minDate:scope.startDate,maxDate:new Date((new Date).setFullYear((new Date).getFullYear()+1)),onSelect:function(date){scope.endDate=date,scope.$apply()}})}}}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/page/:id/:title",{templateUrl:"components/static-pages/page.html",controller:"PageCtrl"})}]).controller("PageCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$http({method:"GET",url:window.data+"/pagesWithMenu/"+$routeParams.id}).then(function(data){$scope.curPage=data.data,"ar"==$rootScope.language?$rootScope.title=JSON.parse($scope.curPage.title).ar:$rootScope.title=JSON.parse($scope.curPage.title).en,$rootScope.metatags={description:$scope.curPage.title,keywords:$scope.curPage.title.split(" ").join(",")}},function(error){console.log(error)}),$rootScope.activeTab=0,$timeout(function(){$("#flighttab").removeClass("active")},1e3)}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/search_results/:query",{templateUrl:"components/static-pages/search_result.html",controller:"SearchResultCtrl"})}]).controller("SearchResultCtrl",["$rootScope","$scope","$http","$routeParams","$timeout","$location","toastr","$filter",function($rootScope,$scope,$http,$routeParams,$timeout,$location,toastr,$filter){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/special_offer_new.png"],$scope.home=!1,$rootScope.activeTab=0,"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Search",$("#searchModal").modal("hide"),$http.get(window.data+"/search/",{params:{query:$routeParams.query},headers:{Accept:"application/json"}}).then(function(data){$.each(data.data.news,function(index,newsItem){newsItem.type="news"}),$.each(data.data.pages,function(index,page){page.type="page"}),$scope.results=data.data.news.concat(data.data.pages),0==$scope.results.length&&($location.path("/en/home"),toastr.error($filter("translate")("app.noResultsMessage")))},function(error){console.log(error)}),$timeout(function(){$("#flighttab").removeClass("active")},1e3)}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/search",{templateUrl:"components/static-pages/search.html",controller:"SearchCtrl"}).when("/:lang/timetable",{templateUrl:"components/static-pages/timetable.html",controller:"SearchCtrl"})}]).controller("SearchCtrl",["$rootScope","$scope","$http","$timeout",function($rootScope,$scope,$http,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"],$scope.home=!1,"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Search Flights",$rootScope.activeTab=0,$rootScope.metatags={description:"Search for a flight",keywords:"احجز رحلة، Search, flights, search flights"},$timeout(function(){$("#flighttab").removeClass("active")},1e3)}]).directive("addActive",["$timeout",function($timeout){return{restrict:"AE",link:function(scope,element,attr){$timeout(function(){element.addClass("active")},1002)}}}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/special_offers",{templateUrl:"components/static-pages/special-offers.html",controller:"OffersCtrl"})}]).controller("OffersCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/special_offer_new.png"],$scope.home=!1,$scope.itemsPerPage=8,$scope.currentPage=1,$scope.filteredOffers=[],$rootScope.active=0,$scope.pageChanged=function(){console.log("Page changed to: "+$scope.currentPage);var begin=($scope.currentPage-1)*$scope.itemsPerPage,end=begin+$scope.itemsPerPage;$scope.filteredOffers=$scope.offers.slice(begin,end)},$timeout(function(){$("#flighttab").removeClass("active")},1e3),"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Special Offers",$rootScope.metatags={description:"Special offers only from nile air",keywords:"special offers, special, offers, عروض خاصة"},$http({method:"GET",url:window.data+"/portalSpecialOffers"}).then(function(data){$scope.offers=data.data,$.each($scope.offers,function(index,offer){var today=new Date,endDate=new Date(offer.endDate);today>endDate?offer.passed=!0:offer.passed=!1,index<$scope.itemsPerPage&&$scope.filteredOffers.push(offer)}),console.log($scope.offers)},function(error){console.log(error)})}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/rent-car",{templateUrl:"components/static-pages/rent-car.html",controller:"carCtrl"})}]).controller("carCtrl",["$rootScope","$scope","$http","$routeParams",function($rootScope,$scope,$http,$routeParams){$scope.home=!1,$rootScope.active=0,"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Rent a Car",$rootScope.metatags={description:"Rent a car",keywords:"Rent, Car, عربية، تاجير، اجر"}}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/book-hotel",{templateUrl:"components/static-pages/book-hotel.html",controller:"hotelCtrl"})}]).controller("hotelCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$scope.home=!1,$rootScope.active=0,"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Book a Hotel",$timeout(function(){$("#flighttab").removeClass("active")},1e3)}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/refund",{templateUrl:"components/static-pages/refund.html",controller:"RefundCtrl"})}]).controller("RefundCtrl",["$rootScope","$scope","$http","$routeParams","toastr","$timeout","$location",function($rootScope,$scope,$http,$routeParams,toastr,$timeout,$location){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/web_03-2.jpg"],$scope.home=!1,$scope.refundTypes=[{name:'{"en": "Fully unused ticket", "ar": "تذكرة غير مستخدمة على الإطلاق"}'},{name:'{"en": "Partially used ticket", "ar": "تذكرة مستخدمة جزئيا"}'}],$rootScope.metatags={description:"Request refund for your ticket",keywords:"Partially used ticket, تذكرة مستخدمة جزئيا, تذكرة غير مستخدمة على الإطلاق, Fully unused ticket"},$scope.passengers=[],$("#firstAsterisk").css("display",""),$scope.addPassenger=function(){var curLength=$scope.passengers.length;curLength>0&&(""==$scope.passengers[curLength-1].name||"325"==$scope.passengers[curLength-1].ticket_number)?toastr.error("You Must Fill All the Data about last passenger","Thanks"):$scope.passengers.push({name:"",ticket_number:"325"})},$scope.departureChoosen=!0,$scope.$watch("departureAirport",function(newValue,oldValue){$scope.departureChoosen=!0,$scope.filterDestination()}),$scope.filterDestination=function(){$rootScope.filteredFlights=[];var flights=$rootScope.flights;if(flights){for(var i=0;i<flights.length;i++)flights[i].from.code===$scope.departureAirport&&$rootScope.filteredFlights.indexOf(flights[i].to)<0&&$rootScope.filteredFlights.push(flights[i].to);$scope.departureChoosen=!1}},$scope.opts={locale:{applyClass:"btn-green",applyLabel:"Apply",fromLabel:"From",format:"DD-MM-YYYY",toLabel:"To",cancelLabel:"Cancel",customRangeLabel:"Custom range"},singleDatePicker:!0,ranges:{"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()]}},$scope.booking_ref="",$scope.$watch("currentCountry",function(newValue,oldValue){var index=$rootScope.countries.indexOf($scope.currentCountry);index>=0&&($scope.telcode=$rootScope.areaCodes[index])}),$scope.submitRefund=function(){if(!/^[0-9 +]+$/.test($scope.telcode+$scope.telephone))return void toastr.error("Please enter a valid telephone number","Thanks");if($scope.email!==$scope.emailConfirmation)return void toastr.error("Email Confirmation is not valid","Please enter the same email you entered!");if(!$scope.gRecaptchaResponse)return void toastr.error("You should validate the captcha","Thanks");var length=$scope.passengers.length;if(0===length)return void toastr.error("You should enter at least one passenger","Thanks");if(""==$scope.passengers[length-1].name||""==$scope.passengers[length-1].ticket_number)return void toastr.error("You should enter all passenger data First","Thanks");if(!$scope.refundType)return void toastr.error("You should Choose your refund request type","Thanks");$scope.refundForm.$setSubmitted();var refundRequest={fullname:$scope.fullname,email:$scope.email,departing:$scope.departing,booking_ref:$scope.booking_ref,telephone:$scope.telcode+$scope.telephone,comments:$scope.comments,passenger_name:$scope.passenger_name,ticket_number:$scope.ticket_number,passengers:JSON.stringify($scope.passengers),departure_airport:$scope.departureAirport,destination_airport:$scope.destinationAirport,type:$scope.refundType};$http.post(window.data+"/refundFlight",refundRequest).then(function(data){console.log(data),toastr.success("Refund Form Submitted","Thank you, Will contact you soon!"),$timeout(function(){$location.path("/en/home")},222)},function(error){console.log(error),400===error.status&&toastr.error("Opps, your request has been submitted previously please contact us for more details")})},"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Refund",$scope.opened=!1,$scope.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),startingDay:1},$timeout(function(){$("#flighttab").removeClass("active")},1e3),$rootScope.activeTab=0}]).directive("arrayRequired",function(){return{restrict:"A",require:"ngModel",link:function(scope,elem,attrs,ngModel){ngModel.$validators.arrayRequired=function(modelValue,viewValue){var modelValue=modelValue||{};return modelValue.length>0}}}}),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/feedback",{templateUrl:"components/static-pages/feedback.html",controller:"FeedbackCtrl"})}]).controller("FeedbackCtrl",["$rootScope","$scope","$http","$routeParams","toastr","$timeout",function($rootScope,$scope,$http,$routeParams,toastr,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/Htmleditor/images/Page%20Banners/fb3.jpg"],$scope.home=!1,$timeout(function(){
$("#flighttab").removeClass("active")},1e3),"ar"==$rootScope.language?$rootScope.title="المقترحات":$rootScope.title="Feedback",$scope.feedbackType="",$scope.title="",$("#type").change(function(){$scope.type=$(this).val()}),$("#titleweb").change(function(){$scope.title=$(this).val()}),$("#from").change(function(){$scope.from=$(this).val()}),$("#to").change(function(){$scope.to=$(this).val()}),$scope.departureChoosen=!0,$scope.$watch("from",function(newValue,oldValue){$scope.departureChoosen=!0,$scope.filterDestination()}),$scope.filterDestination=function(){$rootScope.filteredFlights=[];var flights=$rootScope.flights;if(flights){for(var i=0;i<flights.length;i++)flights[i].from.code===$scope.from&&$rootScope.filteredFlights.indexOf(flights[i].to)<0&&$rootScope.filteredFlights.push(flights[i].to);$scope.departureChoosen=!1}},$scope.$watch("currentCountry",function(newValue,oldValue){var index=$rootScope.countries.indexOf($scope.currentCountry);index>=0&&($scope.telcode=$rootScope.areaCodes[index])}),$scope.submitFeedback=function(){var feedback={type:$scope.type,title:$scope.title?$scope.title:"",first_name:$scope.first_name?$scope.first_name:"",last_name:$scope.last_name?$scope.last_name:"",email:$scope.email,telephone:$scope.telephone?$scope.telcode+$scope.telephone:"",booking_ref:$scope.booking_ref,flight_number:$scope.flight_number,from_loc:$scope.from,to_loc:$scope.to,travel_class:$scope.travel_class,departing:$scope.departing,body:$scope.body};$http.post(window.data+"/feedbacks",feedback).then(function(data){$scope.type="",$scope.title="",$scope.first_name="",$scope.email="",$scope.booking_ref="",$scope.travel_class="",$scope.from="",$scope.to="",$scope.travel_class="",$scope.departing="",$scope.flight_number="",$scope.body="",$scope.last_name="",toastr.success("Feedback Submitted","Thank you, Will contact you soon!")},function(error){console.log(error),toastr.error("Feedback Error")})}}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/destination-map",{templateUrl:"components/static-pages/destination.html",controller:"destinationCtrl"})}]).controller("destinationCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$rootScope.home=!1,$rootScope.activeTab=0,"ar"==$rootScope.language?$rootScope.title="":$rootScope.title="Destination",$timeout(function(){$("#flighttab").removeClass("active")},1e3)}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/flight_status",{templateUrl:"components/static-pages/flight-status.html",controller:"flightStatusCtrl"})}]).controller("flightStatusCtrl",["$rootScope","$scope","$http","$routeParams","$timeout",function($rootScope,$scope,$http,$routeParams,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/special_offer_new.png"],$scope.home=!1,$rootScope.active=0,"ar"==$rootScope.language?$rootScope.title="حالة الرحلات":$rootScope.title="Flight Status",$rootScope.metatags={description:$rootScope.title,keywords:"Flight Status حالة الرحلات Nile Air".split(" ").join(",")},$(document).ready(function(){$timeout(function(){$(".booking-box ul li:first.acive").removeClass("active")},1e3)})}]),angular.module("myApp.staticPages").config(["$routeProvider",function($routeProvider){$routeProvider.when("/:lang/bookings",{templateUrl:"components/static-pages/bookings.html",controller:"bookingsCtrl"})}]).controller("bookingsCtrl",["$window","$rootScope","$scope","$http","$routeParams","$timeout",function($window,$rootScope,$scope,$http,$routeParams,$timeout){$rootScope.slides=["http://admin.nileair.com.booxe.com/AllData/Data/HTMLEditor/Images/special_offer_new.png"],$scope.home=!1,$rootScope.active=0,"ar"==$rootScope.language?$rootScope.title="بيانات الحجز":$rootScope.title="My Bookings",$rootScope.metatags={description:$rootScope.title,keywords:"Flight Status بيانات الحجز Nile Air".split(" ").join(",")},$(document).ready(function(){$timeout(function(){$(".booking-box ul li:first").removeClass("active")},1e3)}),$scope.submitBooking1=function(){console.log($rootScope.booking);var req={method:"POST",url:window.data+"/bookings",data:JSON.stringify($scope.booking)};$http(req).then(function(data){console.log(data),console.log($rootScope.amaduesUrl+data.data.params);var link=$rootScope.amaduesUrlBokking+data.data.params;$timeout(function(){$window.location.href=link},200)},function(error){console.log(error)})}}]);